(() => {

    let a = "3d3d373d3d3d363d735b38da6a701c568545dcfcb03fcb875f56beddc45af43d82803e903d91602b57fd5bf3"
  console.log(a.length);

  return
    let bytecode = "6080604052348015600e575f5ffd5b506101e18061001c5f395ff3fe608060405234801561000f575f5ffd5b506004361061003f575f3560e01c80633fb5c1cb146100435780638381f58a1461005f578063d09de08a1461007d575b5f5ffd5b61005d600480360381019061005891906100e4565b610087565b005b610067610090565b604051610074919061011e565b60405180910390f35b610085610095565b005b805f8190555050565b5f5481565b5f5f8154809291906100a690610164565b9190505550565b5f5ffd5b5f819050919050565b6100c3816100b1565b81146100cd575f5ffd5b50565b5f813590506100de816100ba565b92915050565b5f602082840312156100f9576100f86100ad565b5b5f610106848285016100d0565b91505092915050565b610118816100b1565b82525050565b5f6020820190506101315f83018461010f565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61016e826100b1565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036101a05761019f610137565b5b60018201905091905056fea2646970667358221220eea6d9ec91988d758f9b6ee0aa8d6c58299661bb753d9b6c8adee82b9ae0171364736f6c634300081c0033"
    let deployed = "608060405234801561000f575f5ffd5b506004361061003f575f3560e01c80633fb5c1cb146100435780638381f58a1461005f578063d09de08a1461007d575b5f5ffd5b61005d600480360381019061005891906100e4565b610087565b005b610067610090565b604051610074919061011e565b60405180910390f35b610085610095565b005b805f8190555050565b5f5481565b5f5f8154809291906100a690610164565b9190505550565b5f5ffd5b5f819050919050565b6100c3816100b1565b81146100cd575f5ffd5b50565b5f813590506100de816100ba565b92915050565b5f602082840312156100f9576100f86100ad565b5b5f610106848285016100d0565b91505092915050565b610118816100b1565b82525050565b5f6020820190506101315f83018461010f565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61016e826100b1565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036101a05761019f610137565b5b60018201905091905056fea2646970667358221220eea6d9ec91988d758f9b6ee0aa8d6c58299661bb753d9b6c8adee82b9ae0171364736f6c634300081c0033"    
    const {zeroCount,nonZeroCount} = countZeroAndNonZeroBytes(bytecode)
    const {count} = countZeroAndNonZeroBytes(deployed)
    
    const gas = 203856 // 156813 - 156636
    const codedeposit = count * 200
    const calldataGas = (zeroCount * 4) + (nonZeroCount * 16)

    console.log("Total Gas: ", 21000 + 32000 + calldataGas + codedeposit);
    
})()

function countZeroAndNonZeroBytes(bytecode: string) {
  
  // "0x" 프리픽스 제거
  if (bytecode.startsWith("0x")) {
    bytecode = bytecode.slice(2);
  }

  // 2자리씩(=1바이트씩) 배열로 분할
  const bytes = bytecode.match(/.{2}/g) || [];

  let zeroCount = 0;
  let nonZeroCount = 0;

  for (const byte of bytes) {
    if (byte === "00") {
      zeroCount += 1;
    } else {
      nonZeroCount += 1;
    }
  }

  return { zeroCount, nonZeroCount, count:zeroCount + nonZeroCount};
}
